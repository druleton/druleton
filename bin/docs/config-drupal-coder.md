# Coder configuration
When running code sniffer (phpcs) by using the bin/coder wrapper command default
settings are passed to it to force Drupal standards.

The `config/drupal_coder.sh` file contains the configuration for the command.



## Extensions
By default, PHP_CodeSniffer will check any file it finds with a .inc, .php, .js
or .css extension. Drupal (< v8) uses non-standard file extensions like .install
and .module.

Add an array of extensions to the `$CODER_EXTENSIONS` variable to set what
drupal specific files should be scanned.

Example:

```bash
# File extensions to include in the code inspections.
CODER_EXTENSIONS=(
  css
  inc
  info
  install
  js
  md
  module
  php
  profile
  test
  theme
  txt
)
```

> Note: these are fallback extensions in case no custom extensions are set when
> running the `bin/coder` command.

Example to run the command with custom extensions:

```bash
$ bin/coder --extensions=php,install,module,inc
```



## Ignore
Some code can be generated (like features). That code is not always as defined
in the Drupal code standards.

Add an array of ignore patterns to the `$CODER_IGNORE` variable to exclude
specific files.

Example:

```bash
# Ignore patterns to exclude specific files from the code inspections.
CODER_IGNORE=(
  # Code generated by exporting features.
  "*.context.inc"
  "*.ds.inc"
  "*.facetapi_defaults.inc"
  "*.features.inc"
  "*.features.*.inc"
  "*.field_group.inc"
  "*.file_default_displays.inc"
  "*.pages.inc"
  "*.pages_default.inc"
  "*.strongarm.inc"
  "*.views_default.inc"
  # 3th party javascript libraries.
  "ckeditor-plugins"
  # Builders (npm, grunt, gulp, bower,... related files).
  "dist"
  "node_modules"
  "bower_components"
)
```

> Note: these are fallback patterns in case no custom patterns are set when
> running the `bin/coder` command.

Example to run the command with custom ignore patterns:

```bash
$ bin/coder --ignore=*.context.inc,*.features.inc
```



## Directories
PHP_CodeSniffer runs by default recursive in all directories from the directory
where the method is called.

The `bin/coder` command will only run without a path if an array of directories
and/or files is defined in the `$CODER_DIRECTORIES` variable.

If the number of code (modules/themes) in a directory is to big, the PHP memory
limit can be reached. A workaround is to specify the paths separately in the
config array as each entry will be inspected in a separate code inspection
call.

Example:

```bash
# Directories to scan and perform code inspections on.
CODER_DIRECTORIES=(
  "$DIR_PROJECT/profiles"
  "$DIR_PROJECT/modules"
  "$DIR_PROJECT/themes"
)
```

> Note: These directories are only scanned as long as no argument is passed to
> the command.

This will run code sniffer on all directories and files as defined in the
`$CODER_DIRECTORIES` variable:

```bash
$ bin/coder
```

This will run code sniffer only on the provided path:

```bash
$ bin/coder project/modules/module_name
```



[Back to overview][link-overview]



[link-overview]: README.md
